---
// components
import Hero from "@components/Hero/Hero.astro";
import CourseCard from "@components/CourseCard/CourseCard.astro";
// data
import siteData from "@config/siteData.json";
// utils
// layout
import BaseLayout from "@layouts/BaseLayout.astro";
import { MoveRight } from "lucide-react";
import IframeComponent from "@/components/IframeComponent/IframeComponent.astro";

import { getKeystaticReader } from "@/lib/keystatic-reader";

const reader = getKeystaticReader();
const homepage = await reader.singletons.homepage.read();

const heroTitle = homepage?.heroTitle || "Developing Safe And Responsible Shooters";
const heroSubtitle =
	homepage?.heroSubtitle ||
	"Live Fire Instruction is the leading expert in teaching first-time firearm users and Virginia Permit / CCW Courses.";
const heroCtaText = homepage?.heroCtaText || "Find your course";
const heroCtaLink = homepage?.heroCtaUrl || "/firearm-training";
const heroSecondaryCtaText = homepage?.heroSecondaryCtaText || "Read the blog";
const heroSecondaryCtaLink = homepage?.heroSecondaryCtaUrl || "/blog/";

const cardSectionTitle =
	homepage?.cardSectionTitle || "Virginia Carry Permit & Basic Course Every Thursday & Saturday";
const iframeUrl =
	homepage?.iframeUrl || "https://instructorsdash.com/lisa-chau/categories/all?view=iframe";
const iframeHeight = homepage?.iframeHeight || 900;
const iframeWidth = homepage?.iframeWidth || "1200";
---

<BaseLayout title={"Home - " + siteData.title} description={siteData.description}>
	<Hero
		title={heroTitle}
		subtitle={heroSubtitle}
		ctaText={heroCtaText}
		ctaLink={heroCtaLink}
		secondaryCtaText={heroSecondaryCtaText}
		secondaryCtaLink={heroSecondaryCtaLink}
	/>
	<section class="py-14 md:py-22">
		<div class="site-container mx-auto">
			<a href="/calendar" class="text-center">
				<h2
					class="font-headline text-blue mb-16 flex flex-col items-center justify-center gap-6 text-center text-2xl font-medium hover:underline md:text-3xl lg:flex-row"
				>
					{cardSectionTitle}
					<MoveRight size={32} className="text-primary" />
				</h2>
			</a>
			<CourseCard />
		</div>
	</section>
	<section class="bg-blue-dark py-16 md:py-24">
		<div class="site-container text-center">
			<IframeComponent height={iframeHeight} width={iframeWidth} src={iframeUrl} />
		</div>
	</section>
</BaseLayout>
