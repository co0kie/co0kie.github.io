---
export const prerender = true;
import siteData from "@/config/siteData.json";
import Pagination from "@components/Pagination/Pagination.astro";
// components
import PostCard from "@components/PostCard/PostCard.astro";
// utils
import { getAllPosts } from "@js/blogUtils";
// layout
import BaseLayout from "@layouts/BaseLayout.astro";
import { type Page } from "astro";

export async function getStaticPaths({ paginate }: any) {
	const posts = await getAllPosts();

	return paginate(posts, {
		pageSize: 6,
	});
}

const { page } = Astro.props as { page: Page };
---

<BaseLayout title={"Recent Blog Posts" + " - " + siteData.title} description={siteData.description}>
	<section class="site-container py-12 md:py-24">
		<div class="mx-auto max-w-2xl text-center">
			<h1 class="font-headline text-4xl font-bold md:text-5xl">Our Blog</h1>
		</div>

		<div class="mt-16 grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
			{page.data.map((post) => <PostCard post={post} showDescription={true} />)}
		</div>

		<!-- Pagination -->
		<div class="mt-8 flex justify-center">
			<Pagination
				prevUrl={page.url.prev}
				currPage={page.currentPage}
				nextUrl={page.url.next}
				lastPage={page.size}
			/>
		</div>
	</section>
</BaseLayout>
